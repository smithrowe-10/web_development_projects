# ì ê¹ ëŠ¦ê²Œ ì˜¤ì‹œëŠ” ë¶„ë“¤ ê¸°ë‹¤ë ¤ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤
ì»´í¬ë„ŒíŠ¸ ì§„í–‰í•˜ê³  ìˆìœ¼ì‹œê¸° ë°”ëë‹ˆë‹¤.
7ì‹œ 50ë¶„ì— ì‰¬ëŠ” ì‹œê°„ ê°€ì§€ê³  8ì‹œë¶€í„° ìˆ˜ì—…í•˜ê² ìŠµë‹ˆë‹¤
# ê¸ˆì¼ ìˆ˜ì—… ê³„íš
## í™˜ê²½ ë³€ìˆ˜ë¥¼ ì ìš©í•œ ë¦¬íŒ©í† ë§
ì„œë²„ URLì€ ë” ë§ì€ CRUD ê¸°ëŠ¥ì„ ë§Œë“¤ ë•Œ ì†ŒìŠ¤ ì½”ë“œì—ì„œ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µë  ìˆ˜ ìˆìœ¼ë©° ë°±ì—”ë“œê°€ localhostê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì„œë²„ì— ë°°í¬ë  ë•Œ ë³€ê²½ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í™˜ê²½ ë³€ìˆ˜ë¡œ ì •ì˜í•˜ëŠ” í¸ì´ ì•ˆì „í•¨. ê·¸ëŸ´ ê²½ìš° URLì´ ë°”ë€Œë”ë¼ë„ í•œ ë²ˆë§Œ ìˆ˜ì •í•˜ë©´ ë˜ê¸° ë•Œë¬¸ -> ì¦‰, í•˜ë“œì½”ë”©ì„ ìµœëŒ€í•œ ì¤„ì¼ ê²ƒ

vite í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, í™˜ê²½ ë³€ìˆ˜ ì´ë¦„ì€
VITE_ë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤. ì ‘ë‘ì‚¬ê°€ VITE_ì¸ ë³€ìˆ˜ë§Œ ì†ŒìŠ¤ ì½”ë“œì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

carfront(ê°€ì¥ ìƒë‹¨)ì— ìš°í´ë¦­ -> new file -> .env
```java
VITE_API_URL=http://localhost:8080
```

ì—¬ê¸°ì €ê¸° í©ì–´ì ¸ìˆëŠ” API í˜¸ì¶œ í•¨ìˆ˜ë“¤ì„ ìì²´ ëª¨ë“ˆë¡œ ë¶„ë¦¬
src-> ìš°í´ë¦­ -> new folder -> api -> carapi.ts

Carlist.tsx íŒŒì¼ ë‚´ë¶€ì—ì„œ getCars í•¨ìˆ˜ë¥¼ ë¶„ë¦¬í•´ì˜¬ê²ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ exportë„ ì¶”ê°€í• ê²ã„´ë””ã….
ë¹„íŠ¸ì—ì„œ í™˜ê²½ë³€ìˆ˜ëŠ” import.meta.envë¥¼ í†µí•´ ì•± ì†ŒìŠ¤ì½”ë“œì— ë¬¸ìì—´ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒì— ì„œë²„ URLì„ í†µí•´ getCars í•¨ìˆ˜ë¡œ ê°€ì ¸ì™€ì„œ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•  ì˜ˆì •ì´ë‹ˆ axiosì™€ CarResponse íƒ€ì…ë„ carapi.tsë¡œ ì„í¬íŠ¸ í•  í•„ìš”ì„±ì´ ìˆìŒ.


## í˜ì´ì§•, í•„í„°ë§, ì •ë ¬ ì¶”ê°€(ê°€ëŠ¥í•˜ë‹¤ë©´)
* í˜¹ì‹œ ë²„ì „ ì‹¤ìˆ˜í• ê¹Œë´ ë¯¸ë¦¬ ëª…ì‹œí•©ë‹ˆë‹¤. ì˜¤ëŠ˜ ìˆ˜ì—… ë•Œ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤.

ê¸°ì¡´ ë²„ì „ ì‚­ì œ
npm uninstall @mui/material @mui/x-data-grid

MUI 5.17 ë²„ì „ ì„¤ì¹˜
npm install @mui/material@5.17.1 @emotion/react@11.14.0 @emotion/styled@11.14.0

data-grid ì¬ì„¤ì¹˜
npm install @mui/x-data-grid@6.20.4

ë‹¤í•˜ì…¨ìœ¼ë©´ ì•± í•œ ë²ˆ ê»ë‹¤ê°€ ë‹¤ì‹œ í‚¤ê² ìŠµë‹ˆë‹¤.
í„°ë¯¸ë„ì—ì„œ ctrl + cì—ì„œ ì¢…ë£Œ í›„
vs codeë„ ì¬ì‹¤í–‰

```tsx
import { useQuery } from "@tanstack/react-query";
import { CarResponse } from "../types";
import { getCars } from "../api/carapi";
import { DataGrid, GridColDef } from "@mui/x-data-grid";

function Carlist() {
  const { data, error, isSuccess } = useQuery({
    queryKey: ["cars"],
    queryFn: getCars
  });

  const columns: GridColDef[] = [
    {field: 'brand', headerName: 'Brand', width: 200},
    {field: 'model', headerName: 'Model', width: 200},
    {field: 'color', headerName: 'Color', width: 200},
    {field: 'registrationNumber', headerName: 'Reg.nr.', width: 150},
    {field: 'modelYear', headerName: 'Model Year', width: 150},
    {field: 'price', headerName: 'Price', width: 150},
  ]



  if(!isSuccess) {
    return <span>Loading ì¤‘... ğŸ˜‚</span>
  }
  else if (error) {
    return <span>ìë™ì°¨ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ ğŸ˜ª</span>
  }
  else {
    return(
      <table>
        <tbody>
          {
            data.map((car: CarResponse) =>
            <tr key={car._links.self.href}>
              <td>{car.brand}</td>
              <td>{car.model}</td>
              <td>{car.color}</td>
              <td>{car.registrationNumber}</td>
              <td>{car.modelYear}</td>
              <td>{car.price}</td>
            </tr>)
          }
        </tbody>
      </table>
    );
  }
}

export default Carlist;
```
GridColDef ì •ì˜ í›„ì—ëŠ”
ê¸°ì¡´ return ë‚´ì—ì„œì˜ tableì„ ì‚­ì œ í•´ì•¼í•˜ë¯€ë¡œ ë‚¨ê²¨ë†¨ìŠµë‹ˆë‹¤.

```tsx
return(
      <DataGrid
        rows={data}
        columns={columns}
        getRowId={row => row._links.self.href}
      />
    );
```
DataGridì˜ ë‚´ë¶€ì— {rows, columns, getRowId} -> props drilling

## ì‚­ì œ ê¸°ëŠ¥ì„ êµ¬í˜„

getRowId={row => row._links.self.href}ë¥¼ ê³ ë ¤í•˜ì˜€ì„ ë•Œ,
http://localhost:8080/api/cars/{id}ë¡œ DELETE ìš”ì²­ì„ ë‚ ë ¸ì„ ë•Œ, ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í•´ë‹¹ idì˜ ì •ë³´ë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

MUI DataGridì—ì„œ ê° rowì— ëŒ€í•œ ë²„íŠ¼ì„ ìƒì„±.


```tsx
const columns: GridColDef[] = [
    {field: 'brand', headerName: 'Brand', width: 200},
    {field: 'model', headerName: 'Model', width: 200},
    {field: 'color', headerName: 'Color', width: 200},
    {field: 'registrationNumber', headerName: 'Reg.nr.', width: 150},
    {field: 'modelYear', headerName: 'Model Year', width: 150},
    {field: 'price', headerName: 'Price', width: 150},
    {
      field: 'edit',
      headerName: '',
      width: 90,
      sortable: false,
      filterable: false,
      disableColumnMenu: true,
      renderCell: (params: GridCellParams) =>
        <button
          onClick={() => alert(params.row._link.car.href)}  
        >
          ì‚­ì œ
        </button>
    }
  ]
```
ì‚­ì œ ë²„íŠ¼ì„ êµ¬í˜„í–ˆê³ , reactí˜•íƒœë¡œ ë‚´ë¶€ì— callbackë¥¼ ë„£ì–´ì„œ, êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
ì¤‘ìš”í•œ ì ì´ columnsì— columnì„ í•˜ë‚˜ ë” ì¶”ê°€í•  ë•Œ ê°ì²´ì˜ í˜•íƒœë¡œ í–ˆêµ¬ìš”, ì´ì „ì—ëŠ” ë‹¤ trueì¸ sortable / filterableì„ falseë¡œ ìˆ˜ë™ìœ¼ë¡œ ì¡ì•„ì¤¬ë‹¤ëŠ” ì , ê·¸ë¦¬ê³ 

renderCell ê°œë…ì…ë‹ˆë‹¤.

renderCell - ì»¬ëŸ¼ ì†ì„±ì—ì„œ ì»¨í…ì¸ ê°€ ë Œë”ë§ ë˜ëŠ” ë°©ì‹ì„ ì •ì˜í•¨.
ì´ìƒì—ì„œ í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” params argumentëŠ” rowì˜ ëª¨ë“  ê°’ì„ í¬í•¨í•˜ëŠ” row ê°ì²´ì— í•´ë‹¹í•˜ê¸° ë•Œë¬¸ì— id ê°’ë§Œ ì¶”ì¶œí•˜ê¸° ìœ„í•´ì„œ row._links.car.hrefë¡œ ê°€ì§€ê³  ì™”ë‹¤ëŠ” ì ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ í˜„ì¬ ì½”ë“œ ë°©ì‹ìœ¼ë¡œ alertì„ í†µí•´ì„œ id ê°’ì„ ì´ìš©ìê°€ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.

ì´ì œ idë¥¼ í™•ì¸í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê·¸ ì•„ì´ë””ë¥¼ ê°€ì§€ê³  DELETE ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê²Œë” ì‘ì„±í•´ì•¼ í•  ê²ë‹ˆë‹¤.

Axios delete ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ DELETE ìš”ì²­ì„ ìë™ì°¨ ë§í¬ì— ì „ì†¡í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” deleteCar í•¨ìˆ˜ë¥¼ êµ¬í˜„í• ê²ë‹ˆë‹¤.

-> carapi.tsì— í• ê²ë‹ˆë‹¤. -> exportë„ ìˆê² ì£ 

```ts
// carapi.ts
export const deleteCar = async (link: string): Promise<CarResponse> => {
  const response = await axios.delete(link);
  return response.data
}
```
ì‚­ì œ ì²˜ë¦¬ê°€ Carlist ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¼ì–´ë‚˜ì•¼ í•©ë‹ˆë‹¤. useMutation í›…ì„ ì‚¬ìš©í•  ì˜ˆì •

```tsx
  const { mutate } = useMutation(deleteCar, {
    onSuccess: () => {
      // ìë™ì°¨ ì‚­ì œê°€ ë˜ê³  ë‚œ ì´í›„ì— ì‹¤í–‰ë˜ëŠ” ë¡œì§
    },
    onError: (err) => {
      console.log(err);
    },
  });

  const columns: GridColDef[] = [
    {field: 'brand', headerName: 'Brand', width: 200},
    {field: 'model', headerName: 'Model', width: 200},
    {field: 'color', headerName: 'Color', width: 200},
    {field: 'registrationNumber', headerName: 'Reg.nr.', width: 150},
    {field: 'modelYear', headerName: 'Model Year', width: 150},
    {field: 'price', headerName: 'Price', width: 150},
    {
      field: 'edit',
      headerName: '',
      width: 90,
      sortable: false,
      filterable: false,
      disableColumnMenu: true,
      renderCell: (params: GridCellParams) =>
        <button
          onClick={() => mutate(params.row._links.car.href)}  
        >
          ì‚­ì œ
        </button>
    }
  ]
```

ì´ìƒê¹Œì§€ ì‘ì„±í•œ ìƒí™©ì—ì„œ ì•±ì—ì„œ ì‚­ì œ ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ -> í‘¸ë¥¸ìƒ‰ìœ¼ë¡œ í™œì„±í™”ëŠ” ë˜ì§€ë§Œ ë³€í™”ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤(ì‚¬ì‹¤ ì•„ë¬´ë°ë‚˜ ëˆŒëŸ¬ë„ í‘¸ë¥¸ìƒ‰ìœ¼ë¡œ í™œì„±í™”ë©ë‹ˆë‹¤).

ê·¸ë¦¬ê³  ìƒˆë¡œê³ ì¹¨ì„ í•˜ê²Œ ë˜ë©´ ì‚­ì œ ë²„íŠ¼ì„ ëˆ„ë¥¸ ìë™ì°¨ ë°ì´í„°ê°€ ì‚¬ë¼ì§„ ì ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

axios.delete ë©”ì„œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì‘ë™í–ˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
onSuccess ì´í›„ì˜ ë¡œì§ì„ ì‘ì„±í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ë©ˆì¶°ìˆëŠ” ìƒíƒœë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ ìš°ë¦¬ê°€ ë‹¤ìŒë²ˆì— í•´ì•¼í•  ì¼ì€ ë­ë‹¤?

ìë™ì°¨ê°€ ì‚­ì œë˜ë©´ ë‹¤ì‹œ DBë¥¼ ì½ì–´ì™€ì„œ ìµœì‹ í™”ëœ DBë¥¼ ë³´ì—¬ì¤„ í•„ìš”ê°€ ìˆê² ë‹¤.

react queryì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ëŠ” ì¿¼ë¦¬ í´ë¼ì´ì–¸íŠ¸ê°€ ì²˜ë¦¬í•˜ëŠ” ìºì‹œì— ì €ì¥ë˜ê³ , ì¿¼ë¦¬ í´ë¼ì´ì–¸íŠ¸ì—ëŠ” ë°ì´í„°ë¥¼ 'ë‹¤ì‹œ' ê°€ì ¸ì˜¤ëŠ” ë° ì´ìš©í•  ìˆ˜ ìˆëŠ” ì¿¼ë¦¬ë¬´íš¨í™” ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. 

ë¨¼ì €, ì¿¼ë¦¬ í´ë¼ì´ì–¸íŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” useQueryClient í›… í•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜¬ ì˜ˆì •
(queryClientë‘ ë‹¤ë¦…ë‹ˆë‹¤!!!!!)

```tsx
  const queryClient = useQueryClient();

  const { mutate } = useMutation(deleteCar, {
    onSuccess: () => {
      queryClient.invalidateQueries({queryKey: ['cars']});
    },
    onError: (err) => {
      console.log(err);
    },
  });
```

ì´ìƒì˜ ì½”ë“œì—ì„œ ì¿¼ë¦¬ í´ë¼ì´ì–¸íŠ¸ì—ëŠ” ì‚­ì œì— ì„±ê³µí•œ í›„ì— ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” invalidateQueries ë©”ì„œë“œê°€ ìˆê³ , ì´ë¥¼ í†µí•´ ë‹¤ì‹œ ê°€ì ¸ì˜¤ë ¤ëŠ” ì¿¼ë¦¬ì˜ í‚¤ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
return(
      <DataGrid
        rows={data}
        columns={columns}
        getRowId={row => row._links.self.href}
        disableRowSelectionOnClick={true}
      />
    );
```
disableRowSelectionOnClick={true}
ì´ë ‡ê²Œ ì“°ë©´ ë°ì´í„° í•œ ì¤„ ì„ íƒí•˜ëŠ”ê±° í™œì„±í™”ë¥¼ ë¬´íš¨í™”ì‹œí‚¬ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤
ì´ê±´ ë­ ì¤‘ìš”í•œê±´ ì•„ë‹ˆê³ , ê·¸ëƒ¥ ê·¸ëŸ° ê¸°ëŠ¥ë„ ìˆë‹¤ ì •ë„ë¡œ ë³´ì‹œë©´ ë©ë‹ˆë‹¤.

## ë©”ì‹œì§€ í‘œì‹œê¸°ëŠ¥ êµ¬í˜„

ì‚­ì œì— ì„±ê³µí–ˆê±°ë‚˜ ì˜¤ë¥˜ê°€ ìˆëŠ” ê²½ìš° ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°±ì„ í•  ì˜ˆì •(í˜„ì¬ëŠ” ì‚­ì œë˜ë©´ ê·¸ëƒ¥ ë‚ ë¼ê°€ê³ , ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ê²½ìš°ì—ëŠ” console.log(err)ì„ í†µí•´ì„œ ê°œë°œìë„êµ¬ì—ì„œë§Œ ì˜¤ë¥˜ê°€ ë‚¬ìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤).

ì‚­ì œ ìƒíƒœë¥¼ í‘œì‹œí•˜ë„ë¡ í•  MUI SnackBar ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ì˜ˆì •
SnackBar - open í”„ë¡­ê°’ì€ bool íƒ€ì…ì´ê³ , ì´ ê°’ì´ trueë¼ë©´ ì»´í¬ë„ŒíŠ¸ê°€ í‘œì‹œë˜ê³ , falseë¼ë©´ ìˆ¨ê²¨ì§‘ë‹ˆë‹¤.

useStateì— bool ê°’ì„ ë„£ì–´ì„œ, SnackBar openì—ë‹¤ê°€ ê·¸ useStateê°’ì„ ëŒ€ì…í•´ì„œ, trueê°€ ë˜ë©´ ë©”ì‹œì§€ë¥¼ ë„ìš¸ ìˆ˜ ìˆë„ë¡ ì‘ì„±í•  ì˜ˆì •ì…ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ ì‚­ì œ í›„ì—ë§Œ ë©”ì‹œì§€ê°€ í‘œì‹œë˜ì–´ì•¼í•˜ê¸° ë•Œë¬¸ì— ì´ˆê¸°ê°’ì€ falseë¡œ ì¡ì„ í•„ìš”ê°€ ìˆê² ìŠµë‹ˆë‹¤.

Toast Messageì˜ ê°œë…
- í™”ë©´ ìƒì— ì¼ì‹œì ìœ¼ë¡œ ë‚˜íƒ€ë‚¬ë‹¤ê°€ ì‚¬ë¼ì§€ëŠ” ì•ŒëŒ ë©”ì‹œì§€ë¥¼ ì˜ë¯¸í•¨.
- ì‚¬ìš©ì ì•¡ì…˜ì— ëŒ€í•œ ê°„ë‹¨í•œ í”¼ë“œë°±ì„ ì£¼ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë¹„ëª¨ë‹¬(Non-modal)

SnackBar ì»´í¬ë„ŒíŠ¸ëŠ” ì´ìƒì˜ Toast Messageë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ ìì£¼ ì‚¬ìš©ë˜ëŠ” MUI ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

git add .
git commit -m "feat: 20250404 delte function finished"
git push
